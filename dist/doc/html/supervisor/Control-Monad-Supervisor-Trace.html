<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.Supervisor.Trace</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-Supervisor-Trace.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">supervisor-0.1.0.0: Control an internal monad execution for trace generation, backtrakcking, testing and other purposes</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">Control.Monad.Supervisor.Trace</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module add a <code>MonadLoc</code> instance to the <code>Supervisor</code> monad. This instance generates a trace when a
 uncaugh exception is raised.
</p><p>. See the MonadLoc package: <a href="http://hackage.haskell.org/package/monadloc">http://hackage.haskell.org/package/monadloc</a>
</p><p>The package control-monad-exception produces call stacks using <code>monadloc</code>, but the <code>Supervisor</code> monad
 produces execution traces thanks to the backtracking mechanism.
</p><p>The trace is produced after the exception is raised. So it does not generate
 overhead in normal execution.
</p><p>For more finer control of exceptions, ej. for retrowing exceptions managed outside the Supervisor monad
 , create your own instance
</p><p>Execute the example at <code>Demos/TraceExample.hs</code>
</p><pre> {-# OPTIONS -F -pgmF MonadLoc #-}
 module Demos.TraceExample (

 ) where

 import Control.Monad.Loc
 import Control.Monad.Supervisor.Trace
 import Control.Monad.Trans

 main= runTrace $ do
    liftIO $ print &quot;hello&quot;

    example

 example=
    if True
       then  do
               liftIO $ print &quot;world&quot;
               liftIO $ undefined

       else liftIO $ print &quot;not there&quot;
</pre><p>Produce this trace:
</p><pre>
  &quot;hello&quot;
  &quot;world&quot;
  TraceExample.hs: TRACE (error in the last line):
  .
  main, Demos.TraceExample(DemosTraceExample.hs): (23, 18)
  main, Demos.TraceExample(DemosTraceExample.hs): (26, 4)
  example, Demos.TraceExample(DemosTraceExample.hs): (30, 13)
  example, Demos.TraceExample(DemosTraceExample.hs): (32, 15)
  exception: Prelude.undefined
</pre></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:runTrace">runTrace</a> :: <a href="Control-Monad-Supervisor.html#t:Sup">Sup</a> (WState <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="Control-Monad-Supervisor.html#t:Control">Control</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a>)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:runTrace" class="def">runTrace</a> :: <a href="Control-Monad-Supervisor.html#t:Sup">Sup</a> (WState <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="Control-Monad-Supervisor.html#t:Control">Control</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a>)</p><div class="doc"><p>Execute an Supervisor computation and raise an error with a trace when an uncaugh exception
 is raised. It is necessary to preprocess the file with the monadloc-pp preprocessor.
</p><p>Otherwise, it produces the same error with no trace.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>